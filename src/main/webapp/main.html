<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë©”ì¸ í˜ì´ì§€</title>
  
  <!-- main.css ì—°ê²°: ìŠ¤íƒ€ì¼ ì •ì˜ -->
  <link rel="stylesheet" href="css/main.css">

  <!-- events.js ì—°ê²°: ì¼ì • ë°ì´í„°ê°€ ë“¤ì–´ìˆëŠ” íŒŒì¼ -->
  <script src="js/events.js"></script>

  <!-- FullCalendar ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë”© (ë²„ì „ 6.1.14) -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/index.global.min.js"></script>
</head>
<body>

  <!-- ë¯¸ë‹ˆ ìº˜ë¦°ë”ì™€ ì¼ì • ë¦¬ìŠ¤íŠ¸ë¥¼ ê°ì‹¸ëŠ” ì „ì²´ ë°•ìŠ¤ -->
  <div class="mini-calendar-container">

    <!-- ì™¼ìª½ì˜ ë¯¸ë‹ˆ ìº˜ë¦°ë” ë°•ìŠ¤ -->
    <div class="mini-calendar-box">
      <!-- ì—°/ì›” í…ìŠ¤íŠ¸ê°€ ë“¤ì–´ê°€ëŠ” ê³³ -->
      <div id="miniCalendarHeader"></div> 

      <!-- FullCalendarê°€ ë Œë”ë§ë  div -->
      <div id="miniCalendar"></div>
    </div>

    <!-- ì˜¤ë¥¸ìª½ì˜ ì¼ì • ìš”ì•½ ë° ë²„íŠ¼ -->
    <div class="mini-schedule-list">
      <h3>ğŸ“… ì´ë²ˆ ë‹¬ ì¼ì •</h3>

      <!-- ìì„¸íˆ ë³´ê¸° ë²„íŠ¼ (í° ìº˜ë¦°ë” í˜ì´ì§€ë¡œ ì´ë™) -->
      <a href="calendar.html">
        <button class="calendar-button">ìì„¸íˆ ë³´ê¸°</button>
      </a>
    </div>
  </div>

  <!-- ìº˜ë¦°ë” ë Œë”ë§ ë° ì¼ì • í•„í„°ë§ -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const calendarEl = document.getElementById('miniCalendar');
      const headerEl = document.getElementById('miniCalendarHeader');
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth() + 1;

      // í˜„ì¬ ì—°/ì›”ì„ ìƒë‹¨ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ
      headerEl.textContent = `${year}ë…„ ${month}ì›”`;
      Object.assign(headerEl.style, {
        fontWeight: 'bold',
        fontSize: '16px',
        marginBottom: '8px'
      });

      // FullCalendar ë¯¸ë‹ˆ ìº˜ë¦°ë” ìƒì„±
      const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth', // ì›” ë‹¨ìœ„ ë³´ê¸°
        headerToolbar: false,        // ìƒë‹¨ íˆ´ë°” ì œê±°
        fixedWeekCount: false,       // ê³ ì • ì£¼ ìˆ˜ ë¹„í™œì„±í™” (5ì£¼ê°€ ì•„ë‹ ìˆ˜ë„ ìˆìŒ)
        events: sharedEvents         // ì™¸ë¶€ì—ì„œ ë¶ˆëŸ¬ì˜¨ ì¼ì • ë°ì´í„° ì‚¬ìš©
      });
      calendar.render();

      // ì´ë²ˆ ë‹¬ ì¼ì •ë§Œ ì¶”ë ¤ì„œ ì˜¤ë¥¸ìª½ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œ
      const listContainer = document.querySelector('.mini-schedule-list');
      const list = document.createElement('ul');

      sharedEvents.forEach(event => {
        const date = new Date(event.start);
        if (date.getFullYear() === year && date.getMonth() + 1 === month) {
          const li = document.createElement('li');
          li.textContent = `${month}/${date.getDate()} - ${event.title}`;
          list.appendChild(li);
        }
      });

      // "ìì„¸íˆ ë³´ê¸°" ë§í¬ ìœ„ì— ë¦¬ìŠ¤íŠ¸ ì‚½ì…
      listContainer.insertBefore(list, listContainer.querySelector('a'));
    });
  </script>
</body>
</html>